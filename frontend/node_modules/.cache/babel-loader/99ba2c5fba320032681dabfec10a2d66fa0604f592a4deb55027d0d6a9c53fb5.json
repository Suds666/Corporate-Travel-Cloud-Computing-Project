{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\strik\\\\Downloads\\\\cafecoffee\\\\corporate-travel\\\\frontend\\\\src\\\\components\\\\Locations.js\",\n  _s = $RefreshSig$();\n// src/components/Locations.js\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport './Locations.css'; // Ensure CSS is linked\n\n// --- Constants ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IMAGE_PATH = '/images/';\nconst BEAR_NORMAL_SRC = IMAGE_PATH + 'bear.png';\nconst BEAR_SCARY_SRC = IMAGE_PATH + 'bear(1).png';\nconst TREE_SRC = IMAGE_PATH + 'tree_PNG2517.png'; // Use correct filename in public/images\nconst AXE_SRC = IMAGE_PATH + 'axe.png';\nconst WOOD_PILE_SRC = IMAGE_PATH + 'wood.png';\nconst FLINT_SRC = IMAGE_PATH + 'stone.png'; // Use correct filename in public/images\nconst CAMPFIRE_SRC = IMAGE_PATH + 'bonfire.png';\n// Background path is set in CSS now\n\nconst MAX_BEAR_SIZE = 250; // Pixels - Triggers scare\nconst INITIAL_BEAR_SIZE = 50;\nconst BEAR_GROWTH_RATE = 1.2; // Faster rate\nconst BEAR_GROWTH_INTERVAL = 100;\nconst CAMPFIRE_SHRINK_AMOUNT = 50; // Not currently used in logic, but kept constant\nconst TREE_HEALTH = 6; // Number of hits to chop\n// const LOGS_PER_TREE = 5; // (Not used visually in this version)\n// const LOGS_FOR_FIRE = 4; // (Not used visually in this version)\n// const FLINT_STRIKES_NEEDED = 3; // (Not used in logic currently)\nconst CUT_TREE_INTERVAL = 400; // ms between hover cuts\n\n// --- Date Restriction Constants ---\nconst BASIC_MIN_DAYS_AHEAD = 3; // Basic users must book at least 3 days in advance\nconst PREMIUM_MIN_DAYS_AHEAD = 1; // Premium users can book from tomorrow\nconst MAX_DAYS_AHEAD = 90; // Max booking window for everyone\n\n// --- Helper ---\nconst getRandom = (min, max) => Math.random() * (max - min) + min;\n\n// Function to format date as YYYY-MM-DD\nconst formatDate = date => {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n};\n// --- End Helper ---\n\nfunction Locations() {\n  _s();\n  var _user$company;\n  // --- State ---\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    airline,\n    flights,\n    user\n  } = location.state || {}; // User object now includes company status\n  const [origin, setOrigin] = useState('');\n  const [destination, setDestination] = useState('');\n  const [originsList, setOriginsList] = useState([]);\n  const [destinationsList, setDestinationsList] = useState([]);\n\n  // --- NEW: Date State ---\n  const [selectedDate, setSelectedDate] = useState('');\n  const [dateError, setDateError] = useState(''); // For validation errors\n  // --- End NEW ---\n\n  // --- Game State ---\n  const [bear, setBear] = useState({\n    size: INITIAL_BEAR_SIZE,\n    src: BEAR_NORMAL_SRC,\n    isFading: false\n  });\n  const [tree, setTree] = useState({\n    health: TREE_HEALTH,\n    chopped: false,\n    isHit: false\n  });\n  const [woodPile, setWoodPile] = useState({\n    exists: false,\n    isLit: false\n  });\n  const [activeTool, setActiveTool] = useState(null); // 'axe', 'flint', or null\n  const [canCutTree, setCanCutTree] = useState(true); // For cut throttling\n  const [isReloading, setIsReloading] = useState(false); // Prevent render during reload\n\n  // Refs\n  const containerRef = useRef(null);\n  const bearIntervalRef = useRef(null);\n  const treeHitTimeoutRef = useRef(null);\n  const cutThrottleTimeoutRef = useRef(null);\n\n  // --- Get Company Status ---\n  const companyStatus = (user === null || user === void 0 ? void 0 : (_user$company = user.company) === null || _user$company === void 0 ? void 0 : _user$company.status) || 'basic'; // Default to 'basic' if missing\n\n  // --- Calculate Date Restrictions using useMemo ---\n  const {\n    minBookingDate,\n    maxBookingDate\n  } = useMemo(() => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Normalize to start of day\n\n    const minDays = companyStatus === 'premium' ? PREMIUM_MIN_DAYS_AHEAD : BASIC_MIN_DAYS_AHEAD;\n    const minDate = new Date(today);\n    minDate.setDate(today.getDate() + minDays);\n    const maxDate = new Date(today);\n    maxDate.setDate(today.getDate() + MAX_DAYS_AHEAD);\n    return {\n      minBookingDate: formatDate(minDate),\n      maxBookingDate: formatDate(maxDate)\n    };\n  }, [companyStatus]); // Recalculate only if companyStatus changes\n\n  // --- Effects ---\n  useEffect(() => {\n    // Initialize Dropdowns\n    if (flights && Array.isArray(flights)) {\n      setOriginsList([...new Set(flights.map(f => f.origin))]);\n      setDestinationsList([...new Set(flights.map(f => f.destination))]);\n    } else {\n      console.warn(\"Locations: Flights data missing or not an array.\", flights);\n      setOriginsList([]);\n      setDestinationsList([]);\n    }\n  }, [flights]);\n  useEffect(() => {\n    // Bear Growing Logic\n    const startBearGrowth = () => {\n      if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\n      bearIntervalRef.current = setInterval(() => {\n        setBear(prevBear => {\n          // Check if bear should stop growing\n          if (prevBear.isFading || prevBear.src === BEAR_SCARY_SRC || woodPile.isLit) {\n            if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\n            return prevBear; // No change\n          }\n          // Calculate new size\n          const newSize = prevBear.size + BEAR_GROWTH_RATE;\n          // Check if max size reached\n          if (newSize >= MAX_BEAR_SIZE) {\n            if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\n            console.log(\"BEAR SCARED! Setting state to scary.\");\n            return {\n              ...prevBear,\n              size: MAX_BEAR_SIZE,\n              src: BEAR_SCARY_SRC,\n              isFading: false\n            };\n          }\n          // Grow the bear\n          return {\n            ...prevBear,\n            size: newSize\n          };\n        });\n      }, BEAR_GROWTH_INTERVAL);\n    };\n\n    // Start growth only under specific conditions\n    if (!woodPile.isLit && !bear.isFading && bear.src !== BEAR_SCARY_SRC) {\n      startBearGrowth();\n    } else {\n      // Ensure interval is cleared if conditions aren't met\n      if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\n    }\n\n    // Cleanup interval on unmount or when dependencies change\n    return () => {\n      if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\n    };\n  }, [woodPile.isLit, bear.isFading, bear.src]); // Dependencies ensure effect reruns correctly\n\n  useEffect(() => {\n    // Reload on Scare (with Increased Delay)\n    let timer;\n    if (bear.src === BEAR_SCARY_SRC && !isReloading) {\n      console.log(\"Scary bear state detected, starting reload timer...\");\n      setIsReloading(true); // Prevent further renders/actions\n      timer = setTimeout(() => {\n        alert(\"The bear got too close!\");\n        window.location.reload();\n      }, 1500); // 1.5 seconds delay\n    }\n    // Cleanup timeout if component unmounts or state changes before timeout completes\n    return () => clearTimeout(timer);\n  }, [bear.src, isReloading]); // Dependencies\n\n  useEffect(() => {\n    // Cleanup other timeouts on unmount\n    return () => {\n      if (treeHitTimeoutRef.current) clearTimeout(treeHitTimeoutRef.current);\n      if (cutThrottleTimeoutRef.current) clearTimeout(cutThrottleTimeoutRef.current);\n    };\n  }, []); // Empty dependency array means this runs only on unmount\n\n  // --- Callbacks ---\n  const cutTreeAction = useCallback(() => {\n    if (tree.chopped || !canCutTree) return; // Check throttle and chopped status\n\n    setCanCutTree(false); // Throttle starts\n    setTree(prev => ({\n      ...prev,\n      isHit: true\n    })); // Trigger animation state\n\n    // Clear previous hit timeout if any\n    if (treeHitTimeoutRef.current) clearTimeout(treeHitTimeoutRef.current);\n    // Set timeout to remove hit state after animation duration\n    treeHitTimeoutRef.current = setTimeout(() => setTree(prev => ({\n      ...prev,\n      isHit: false\n    })), 300);\n\n    // Update Tree Health & State\n    setTree(prevTree => {\n      const newHealth = Math.max(0, prevTree.health - 1);\n      console.log(\"Tree health:\", newHealth);\n      if (newHealth <= 0 && !prevTree.chopped) {\n        console.log(\"Tree chopped down!\");\n        setWoodPile(prevPile => ({\n          ...prevPile,\n          exists: true,\n          isLit: false\n        })); // Wood pile appears\n        setActiveTool(null); // Deactivate axe after chopping\n        return {\n          ...prevTree,\n          health: 0,\n          chopped: true\n        }; // Mark as chopped\n      }\n      return {\n        ...prevTree,\n        health: newHealth\n      }; // Just update health\n    });\n\n    // Set timeout to allow cutting again after interval\n    cutThrottleTimeoutRef.current = setTimeout(() => {\n      setCanCutTree(true);\n    }, CUT_TREE_INTERVAL);\n  }, [tree.chopped, tree.health, canCutTree]); // Include all state dependencies used\n\n  const handleToolClick = useCallback((toolType, event) => {\n    event.stopPropagation(); // Prevent background click from also firing\n    setActiveTool(prevTool => prevTool === toolType ? null : toolType); // Toggle tool selection\n  }, []); // No dependencies needed\n\n  const handleTreeClick = useCallback(event => {\n    event.stopPropagation(); // Prevent background click\n    // Allow direct click to cut if axe is active, tree isn't chopped, has health, and not throttled\n    if (activeTool === 'axe' && !tree.chopped && tree.health > 0 && canCutTree) {\n      console.log(\"Direct tree click with axe\");\n      cutTreeAction(); // Perform the cut action\n    }\n  }, [activeTool, tree.chopped, tree.health, canCutTree, cutTreeAction]); // Dependencies\n\n  const handleWoodPileClick = useCallback(event => {\n    event.stopPropagation(); // Prevent background click\n    // Allow lighting if flint is active, wood exists, and it's not already lit\n    if (activeTool === 'flint' && woodPile.exists && !woodPile.isLit) {\n      console.log(\"Lighting fire with flint\");\n      setWoodPile(prev => ({\n        ...prev,\n        isLit: true\n      })); // Light it\n      // Stop bear growth and start fading the bear away\n      if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\n      setBear(prev => ({\n        ...prev,\n        isFading: true\n      }));\n      setActiveTool(null); // Deactivate flint after use\n    }\n  }, [activeTool, woodPile.exists, woodPile.isLit]); // Dependencies\n\n  const handleBackgroundClick = useCallback(() => {\n    // Deactivate any active tool if clicked on the background\n    if (activeTool) {\n      console.log(\"Deactivating tool via background click\");\n      setActiveTool(null);\n    }\n  }, [activeTool]); // Dependency\n\n  // --- NEW: Date Change Handler ---\n  const handleDateChange = e => {\n    setSelectedDate(e.target.value);\n    setDateError(''); // Clear any previous date error when user changes the date\n  };\n  // --- End NEW ---\n\n  // --- MODIFIED UI Logic ---\n  const handleProceed = () => {\n    setDateError(''); // Clear previous validation errors\n\n    // 1. Check if date is selected\n    if (!selectedDate) {\n      setDateError('Please select a travel date.');\n      return; // Don't proceed\n    }\n\n    // 2. Validate Weekend Booking for Basic Users\n    if (companyStatus === 'basic') {\n      // Create Date object carefully, specifying time to avoid timezone issues with just date string\n      const dateObj = new Date(selectedDate + 'T00:00:00');\n      const dayOfWeek = dateObj.getDay(); // 0 = Sunday, 6 = Saturday\n      if (dayOfWeek === 0 || dayOfWeek === 6) {\n        setDateError('Weekend bookings are only available for premium companies. Please select a weekday.');\n        return; // Don't proceed\n      }\n    }\n\n    // 3. Find matching flights (existing logic - assumes flights are for any date for now)\n    // IMPORTANT: In a real scenario, you'd likely filter flights based on the selectedDate here too!\n    const matchingFlights = (flights === null || flights === void 0 ? void 0 : flights.filter(f => f.origin === origin && f.destination === destination)) || [];\n\n    // 4. Navigate if valid date and route selected\n    if (matchingFlights.length > 0) {\n      console.log(`Proceeding to seats for ${airline} ${origin}-${destination} on ${selectedDate}`);\n      // Pass selectedDate to the next route (/seats)\n      navigate('/seats', {\n        state: {\n          airline,\n          origin,\n          destination,\n          flights: matchingFlights,\n          // Potentially pre-filtered by date if API supported it\n          user,\n          // Includes company status\n          selectedDate // Pass the chosen date\n        }\n      });\n    } else {\n      // If no flights match origin/destination (date filtering might happen later)\n      alert(\"No flights available for this specific route.\");\n    }\n  };\n  const handleBack = () => navigate(-1); // Go back to the previous page\n\n  // Determine if proceed button should be disabled based on selections\n  const proceedDisabled = !origin || !destination || !selectedDate;\n\n  // --- Render ---\n  // Prevent rendering if reload is imminent (due to bear scare)\n  if (isReloading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"locations-page-wrapper reloading-notice\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: BEAR_SCARY_SRC,\n        alt: \"Scared!\",\n        style: {\n          width: `${MAX_BEAR_SIZE}px`,\n          position: 'absolute',\n          bottom: '2%',\n          right: '5%',\n          transform: 'translateX(50%)',\n          zIndex: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"The bear got too close... reloading!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }, this);\n  }\n\n  // Early return if essential user data is missing\n  if (!user || !user.company) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"locations-page-wrapper error-notice\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Error: User or Company data not loaded correctly.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        className: \"locations-button go-home\",\n        children: \"Go Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 10\n    }, this);\n  }\n\n  // Main component render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `locations-page-wrapper ${activeTool ? `tool-active-${activeTool}` : ''}`,\n    ref: containerRef,\n    onClick: handleBackgroundClick // Handle clicks on the background to deactivate tools\n    ,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"camping-elements-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: bear.src,\n        alt: \"Bear\",\n        className: `bear ${bear.isFading ? 'fading' : ''}` // Apply fading class if needed\n        ,\n        style: {\n          width: `${bear.size}px`\n        } // Dynamic size\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), !tree.chopped && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `tree-container ${activeTool === 'axe' ? 'choppable' : ''} ${tree.isHit ? 'hit' : ''}` // Classes for interaction feedback\n        ,\n        onClick: handleTreeClick // Click action handler\n        ,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: TREE_SRC,\n          alt: \"Tree\",\n          className: \"tree-image\",\n          style: {\n            opacity: tree.health > 0 ? 0.4 + tree.health / TREE_HEALTH * 0.6 : 0.4\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), tree.health < TREE_HEALTH && tree.health > 0 &&\n        /*#__PURE__*/\n        // Also hide if health is 0\n        _jsxDEV(\"div\", {\n          className: \"tree-health-bar-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tree-health-bar-inner\",\n            style: {\n              width: `${tree.health / TREE_HEALTH * 100}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), woodPile.exists && !woodPile.isLit && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: WOOD_PILE_SRC,\n        alt: \"Wood Pile\",\n        className: `wood-pile ${activeTool === 'flint' ? 'lightable' : ''}` // Interaction class\n        ,\n        onClick: handleWoodPileClick // Click action handler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 11\n      }, this), woodPile.isLit && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: CAMPFIRE_SRC,\n        alt: \"Campfire\",\n        className: \"campfire lit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tools-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: AXE_SRC,\n          alt: \"Axe\",\n          className: `tool axe ${activeTool === 'axe' ? 'active' : ''}`,\n          onClick: e => handleToolClick('axe', e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: FLINT_SRC,\n          alt: \"Flint\",\n          className: `tool flint ${activeTool === 'flint' ? 'active' : ''}`,\n          onClick: e => handleToolClick('flint', e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"locations-ui-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"company-status-indicator\",\n        children: [\"Company Plan: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: companyStatus,\n          children: companyStatus.toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Select Route from \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: airline || 'Selected Airline'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleBack,\n        className: \"locations-button back\",\n        children: \"\\uD83D\\uDD19 Change Airline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location-selectors-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"location-selectors\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"select-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"origin-select\",\n              children: \"Origin:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"origin-select\",\n              value: origin,\n              onChange: e => setOrigin(e.target.value),\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- Select Origin --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 21\n              }, this), originsList.map(loc => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: loc,\n                children: loc\n              }, `orig-${loc}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 48\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"select-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"dest-select\",\n              children: \"Destination:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"dest-select\",\n              value: destination,\n              onChange: e => setDestination(e.target.value),\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- Select Destination --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 21\n              }, this), destinationsList.map(loc => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: loc,\n                children: loc\n              }, `dest-${loc}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 53\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"select-group date-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"date-select\",\n            children: \"Travel Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            id: \"date-select\",\n            value: selectedDate,\n            onChange: handleDateChange,\n            min: minBookingDate // Set minimum bookable date\n            ,\n            max: maxBookingDate // Set maximum bookable date\n            ,\n            required: true // HTML5 validation attribute\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 18\n          }, this), companyStatus === 'basic' && /*#__PURE__*/_jsxDEV(\"small\", {\n            className: \"date-restriction-info\",\n            children: \"Weekends unavailable for Basic plan.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 21\n          }, this), dateError && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-message date-error\",\n            children: dateError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 32\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleProceed,\n        disabled: proceedDisabled // Disable if origin, dest, or date is missing\n        ,\n        className: \"locations-button proceed\",\n        children: \"Continue to Seat Selection \\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 10\n      }, this), proceedDisabled && !dateError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"info-message\",\n        children: \"Please select origin, destination, and date.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 44\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 5\n  }, this);\n}\n_s(Locations, \"Twepmye6FyE8F/fbawTi7n3eCFs=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = Locations;\nexport default Locations;\nvar _c;\n$RefreshReg$(_c, \"Locations\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","useLocation","useNavigate","jsxDEV","_jsxDEV","IMAGE_PATH","BEAR_NORMAL_SRC","BEAR_SCARY_SRC","TREE_SRC","AXE_SRC","WOOD_PILE_SRC","FLINT_SRC","CAMPFIRE_SRC","MAX_BEAR_SIZE","INITIAL_BEAR_SIZE","BEAR_GROWTH_RATE","BEAR_GROWTH_INTERVAL","CAMPFIRE_SHRINK_AMOUNT","TREE_HEALTH","CUT_TREE_INTERVAL","BASIC_MIN_DAYS_AHEAD","PREMIUM_MIN_DAYS_AHEAD","MAX_DAYS_AHEAD","getRandom","min","max","Math","random","formatDate","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","Locations","_s","_user$company","location","navigate","airline","flights","user","state","origin","setOrigin","destination","setDestination","originsList","setOriginsList","destinationsList","setDestinationsList","selectedDate","setSelectedDate","dateError","setDateError","bear","setBear","size","src","isFading","tree","setTree","health","chopped","isHit","woodPile","setWoodPile","exists","isLit","activeTool","setActiveTool","canCutTree","setCanCutTree","isReloading","setIsReloading","containerRef","bearIntervalRef","treeHitTimeoutRef","cutThrottleTimeoutRef","companyStatus","company","status","minBookingDate","maxBookingDate","today","Date","setHours","minDays","minDate","setDate","maxDate","Array","isArray","Set","map","f","console","warn","startBearGrowth","current","clearInterval","setInterval","prevBear","newSize","log","timer","setTimeout","alert","window","reload","clearTimeout","cutTreeAction","prev","prevTree","newHealth","prevPile","handleToolClick","toolType","event","stopPropagation","prevTool","handleTreeClick","handleWoodPileClick","handleBackgroundClick","handleDateChange","e","target","value","handleProceed","dateObj","dayOfWeek","getDay","matchingFlights","filter","length","handleBack","proceedDisabled","className","children","alt","style","width","position","bottom","right","transform","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","opacity","toUpperCase","htmlFor","id","onChange","required","loc","type","disabled","_c","$RefreshReg$"],"sources":["C:/Users/strik/Downloads/cafecoffee/corporate-travel/frontend/src/components/Locations.js"],"sourcesContent":["// src/components/Locations.js\r\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport './Locations.css'; // Ensure CSS is linked\r\n\r\n// --- Constants ---\r\nconst IMAGE_PATH = '/images/';\r\nconst BEAR_NORMAL_SRC = IMAGE_PATH + 'bear.png';\r\nconst BEAR_SCARY_SRC = IMAGE_PATH + 'bear(1).png';\r\nconst TREE_SRC = IMAGE_PATH + 'tree_PNG2517.png'; // Use correct filename in public/images\r\nconst AXE_SRC = IMAGE_PATH + 'axe.png';\r\nconst WOOD_PILE_SRC = IMAGE_PATH + 'wood.png';\r\nconst FLINT_SRC = IMAGE_PATH + 'stone.png'; // Use correct filename in public/images\r\nconst CAMPFIRE_SRC = IMAGE_PATH + 'bonfire.png';\r\n// Background path is set in CSS now\r\n\r\nconst MAX_BEAR_SIZE = 250; // Pixels - Triggers scare\r\nconst INITIAL_BEAR_SIZE = 50;\r\nconst BEAR_GROWTH_RATE = 1.2; // Faster rate\r\nconst BEAR_GROWTH_INTERVAL = 100;\r\nconst CAMPFIRE_SHRINK_AMOUNT = 50; // Not currently used in logic, but kept constant\r\nconst TREE_HEALTH = 6; // Number of hits to chop\r\n// const LOGS_PER_TREE = 5; // (Not used visually in this version)\r\n// const LOGS_FOR_FIRE = 4; // (Not used visually in this version)\r\n// const FLINT_STRIKES_NEEDED = 3; // (Not used in logic currently)\r\nconst CUT_TREE_INTERVAL = 400; // ms between hover cuts\r\n\r\n// --- Date Restriction Constants ---\r\nconst BASIC_MIN_DAYS_AHEAD = 3; // Basic users must book at least 3 days in advance\r\nconst PREMIUM_MIN_DAYS_AHEAD = 1; // Premium users can book from tomorrow\r\nconst MAX_DAYS_AHEAD = 90; // Max booking window for everyone\r\n\r\n// --- Helper ---\r\nconst getRandom = (min, max) => Math.random() * (max - min) + min;\r\n\r\n// Function to format date as YYYY-MM-DD\r\nconst formatDate = (date) => {\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}-${month}-${day}`;\r\n};\r\n// --- End Helper ---\r\n\r\nfunction Locations() {\r\n  // --- State ---\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { airline, flights, user } = location.state || {}; // User object now includes company status\r\n  const [origin, setOrigin] = useState('');\r\n  const [destination, setDestination] = useState('');\r\n  const [originsList, setOriginsList] = useState([]);\r\n  const [destinationsList, setDestinationsList] = useState([]);\r\n\r\n  // --- NEW: Date State ---\r\n  const [selectedDate, setSelectedDate] = useState('');\r\n  const [dateError, setDateError] = useState(''); // For validation errors\r\n  // --- End NEW ---\r\n\r\n  // --- Game State ---\r\n  const [bear, setBear] = useState({ size: INITIAL_BEAR_SIZE, src: BEAR_NORMAL_SRC, isFading: false });\r\n  const [tree, setTree] = useState({ health: TREE_HEALTH, chopped: false, isHit: false });\r\n  const [woodPile, setWoodPile] = useState({ exists: false, isLit: false });\r\n  const [activeTool, setActiveTool] = useState(null); // 'axe', 'flint', or null\r\n  const [canCutTree, setCanCutTree] = useState(true); // For cut throttling\r\n  const [isReloading, setIsReloading] = useState(false); // Prevent render during reload\r\n\r\n  // Refs\r\n  const containerRef = useRef(null);\r\n  const bearIntervalRef = useRef(null);\r\n  const treeHitTimeoutRef = useRef(null);\r\n  const cutThrottleTimeoutRef = useRef(null);\r\n\r\n  // --- Get Company Status ---\r\n  const companyStatus = user?.company?.status || 'basic'; // Default to 'basic' if missing\r\n\r\n  // --- Calculate Date Restrictions using useMemo ---\r\n  const { minBookingDate, maxBookingDate } = useMemo(() => {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0); // Normalize to start of day\r\n\r\n    const minDays = companyStatus === 'premium' ? PREMIUM_MIN_DAYS_AHEAD : BASIC_MIN_DAYS_AHEAD;\r\n\r\n    const minDate = new Date(today);\r\n    minDate.setDate(today.getDate() + minDays);\r\n\r\n    const maxDate = new Date(today);\r\n    maxDate.setDate(today.getDate() + MAX_DAYS_AHEAD);\r\n\r\n    return {\r\n      minBookingDate: formatDate(minDate),\r\n      maxBookingDate: formatDate(maxDate),\r\n    };\r\n  }, [companyStatus]); // Recalculate only if companyStatus changes\r\n\r\n  // --- Effects ---\r\n  useEffect(() => { // Initialize Dropdowns\r\n    if (flights && Array.isArray(flights)) {\r\n      setOriginsList([...new Set(flights.map(f => f.origin))]);\r\n      setDestinationsList([...new Set(flights.map(f => f.destination))]);\r\n    } else {\r\n      console.warn(\"Locations: Flights data missing or not an array.\", flights);\r\n      setOriginsList([]);\r\n      setDestinationsList([]);\r\n    }\r\n  }, [flights]);\r\n\r\n  useEffect(() => { // Bear Growing Logic\r\n    const startBearGrowth = () => {\r\n      if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\r\n      bearIntervalRef.current = setInterval(() => {\r\n        setBear((prevBear) => {\r\n          // Check if bear should stop growing\r\n          if (prevBear.isFading || prevBear.src === BEAR_SCARY_SRC || woodPile.isLit) {\r\n            if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\r\n            return prevBear; // No change\r\n          }\r\n          // Calculate new size\r\n          const newSize = prevBear.size + BEAR_GROWTH_RATE;\r\n          // Check if max size reached\r\n          if (newSize >= MAX_BEAR_SIZE) {\r\n            if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\r\n            console.log(\"BEAR SCARED! Setting state to scary.\");\r\n            return { ...prevBear, size: MAX_BEAR_SIZE, src: BEAR_SCARY_SRC, isFading: false };\r\n          }\r\n          // Grow the bear\r\n          return { ...prevBear, size: newSize };\r\n        });\r\n      }, BEAR_GROWTH_INTERVAL);\r\n    };\r\n\r\n    // Start growth only under specific conditions\r\n    if (!woodPile.isLit && !bear.isFading && bear.src !== BEAR_SCARY_SRC) {\r\n      startBearGrowth();\r\n    } else {\r\n      // Ensure interval is cleared if conditions aren't met\r\n      if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\r\n    }\r\n\r\n    // Cleanup interval on unmount or when dependencies change\r\n    return () => { if (bearIntervalRef.current) clearInterval(bearIntervalRef.current); };\r\n  }, [woodPile.isLit, bear.isFading, bear.src]); // Dependencies ensure effect reruns correctly\r\n\r\n  useEffect(() => { // Reload on Scare (with Increased Delay)\r\n    let timer;\r\n    if (bear.src === BEAR_SCARY_SRC && !isReloading) {\r\n      console.log(\"Scary bear state detected, starting reload timer...\");\r\n      setIsReloading(true); // Prevent further renders/actions\r\n      timer = setTimeout(() => {\r\n        alert(\"The bear got too close!\");\r\n        window.location.reload();\r\n      }, 1500); // 1.5 seconds delay\r\n    }\r\n    // Cleanup timeout if component unmounts or state changes before timeout completes\r\n    return () => clearTimeout(timer);\r\n  }, [bear.src, isReloading]); // Dependencies\r\n\r\n  useEffect(() => { // Cleanup other timeouts on unmount\r\n    return () => {\r\n      if (treeHitTimeoutRef.current) clearTimeout(treeHitTimeoutRef.current);\r\n      if (cutThrottleTimeoutRef.current) clearTimeout(cutThrottleTimeoutRef.current);\r\n    };\r\n  }, []); // Empty dependency array means this runs only on unmount\r\n\r\n  // --- Callbacks ---\r\n  const cutTreeAction = useCallback(() => {\r\n    if (tree.chopped || !canCutTree) return; // Check throttle and chopped status\r\n\r\n    setCanCutTree(false); // Throttle starts\r\n    setTree(prev => ({ ...prev, isHit: true })); // Trigger animation state\r\n\r\n    // Clear previous hit timeout if any\r\n    if (treeHitTimeoutRef.current) clearTimeout(treeHitTimeoutRef.current);\r\n    // Set timeout to remove hit state after animation duration\r\n    treeHitTimeoutRef.current = setTimeout(() => setTree(prev => ({ ...prev, isHit: false })), 300);\r\n\r\n    // Update Tree Health & State\r\n    setTree(prevTree => {\r\n      const newHealth = Math.max(0, prevTree.health - 1);\r\n      console.log(\"Tree health:\", newHealth);\r\n      if (newHealth <= 0 && !prevTree.chopped) {\r\n        console.log(\"Tree chopped down!\");\r\n        setWoodPile(prevPile => ({ ...prevPile, exists: true, isLit: false })); // Wood pile appears\r\n        setActiveTool(null); // Deactivate axe after chopping\r\n        return { ...prevTree, health: 0, chopped: true }; // Mark as chopped\r\n      }\r\n      return { ...prevTree, health: newHealth }; // Just update health\r\n    });\r\n\r\n    // Set timeout to allow cutting again after interval\r\n    cutThrottleTimeoutRef.current = setTimeout(() => {\r\n      setCanCutTree(true);\r\n    }, CUT_TREE_INTERVAL);\r\n\r\n  }, [tree.chopped, tree.health, canCutTree]); // Include all state dependencies used\r\n\r\n  const handleToolClick = useCallback((toolType, event) => {\r\n    event.stopPropagation(); // Prevent background click from also firing\r\n    setActiveTool(prevTool => (prevTool === toolType ? null : toolType)); // Toggle tool selection\r\n  }, []); // No dependencies needed\r\n\r\n  const handleTreeClick = useCallback((event) => {\r\n    event.stopPropagation(); // Prevent background click\r\n    // Allow direct click to cut if axe is active, tree isn't chopped, has health, and not throttled\r\n    if (activeTool === 'axe' && !tree.chopped && tree.health > 0 && canCutTree) {\r\n      console.log(\"Direct tree click with axe\");\r\n      cutTreeAction(); // Perform the cut action\r\n    }\r\n  }, [activeTool, tree.chopped, tree.health, canCutTree, cutTreeAction]); // Dependencies\r\n\r\n  const handleWoodPileClick = useCallback((event) => {\r\n    event.stopPropagation(); // Prevent background click\r\n    // Allow lighting if flint is active, wood exists, and it's not already lit\r\n    if (activeTool === 'flint' && woodPile.exists && !woodPile.isLit) {\r\n      console.log(\"Lighting fire with flint\");\r\n      setWoodPile(prev => ({ ...prev, isLit: true })); // Light it\r\n      // Stop bear growth and start fading the bear away\r\n      if (bearIntervalRef.current) clearInterval(bearIntervalRef.current);\r\n      setBear(prev => ({ ...prev, isFading: true }));\r\n      setActiveTool(null); // Deactivate flint after use\r\n    }\r\n  }, [activeTool, woodPile.exists, woodPile.isLit]); // Dependencies\r\n\r\n  const handleBackgroundClick = useCallback(() => {\r\n    // Deactivate any active tool if clicked on the background\r\n    if (activeTool) {\r\n      console.log(\"Deactivating tool via background click\");\r\n      setActiveTool(null);\r\n    }\r\n  }, [activeTool]); // Dependency\r\n\r\n  // --- NEW: Date Change Handler ---\r\n  const handleDateChange = (e) => {\r\n    setSelectedDate(e.target.value);\r\n    setDateError(''); // Clear any previous date error when user changes the date\r\n  };\r\n  // --- End NEW ---\r\n\r\n  // --- MODIFIED UI Logic ---\r\n  const handleProceed = () => {\r\n    setDateError(''); // Clear previous validation errors\r\n\r\n    // 1. Check if date is selected\r\n    if (!selectedDate) {\r\n        setDateError('Please select a travel date.');\r\n        return; // Don't proceed\r\n    }\r\n\r\n    // 2. Validate Weekend Booking for Basic Users\r\n    if (companyStatus === 'basic') {\r\n        // Create Date object carefully, specifying time to avoid timezone issues with just date string\r\n        const dateObj = new Date(selectedDate + 'T00:00:00');\r\n        const dayOfWeek = dateObj.getDay(); // 0 = Sunday, 6 = Saturday\r\n        if (dayOfWeek === 0 || dayOfWeek === 6) {\r\n            setDateError('Weekend bookings are only available for premium companies. Please select a weekday.');\r\n            return; // Don't proceed\r\n        }\r\n    }\r\n\r\n    // 3. Find matching flights (existing logic - assumes flights are for any date for now)\r\n    // IMPORTANT: In a real scenario, you'd likely filter flights based on the selectedDate here too!\r\n    const matchingFlights = flights?.filter(f => f.origin === origin && f.destination === destination) || [];\r\n\r\n    // 4. Navigate if valid date and route selected\r\n    if (matchingFlights.length > 0) {\r\n      console.log(`Proceeding to seats for ${airline} ${origin}-${destination} on ${selectedDate}`);\r\n      // Pass selectedDate to the next route (/seats)\r\n      navigate('/seats', {\r\n          state: {\r\n              airline,\r\n              origin,\r\n              destination,\r\n              flights: matchingFlights, // Potentially pre-filtered by date if API supported it\r\n              user, // Includes company status\r\n              selectedDate // Pass the chosen date\r\n          }\r\n      });\r\n    } else {\r\n      // If no flights match origin/destination (date filtering might happen later)\r\n      alert(\"No flights available for this specific route.\");\r\n    }\r\n  };\r\n\r\n  const handleBack = () => navigate(-1); // Go back to the previous page\r\n\r\n  // Determine if proceed button should be disabled based on selections\r\n  const proceedDisabled = !origin || !destination || !selectedDate;\r\n\r\n  // --- Render ---\r\n  // Prevent rendering if reload is imminent (due to bear scare)\r\n  if (isReloading) {\r\n    return (\r\n        <div className=\"locations-page-wrapper reloading-notice\">\r\n            <img src={BEAR_SCARY_SRC} alt=\"Scared!\" style={{width: `${MAX_BEAR_SIZE}px`, position: 'absolute', bottom: '2%', right: '5%', transform: 'translateX(50%)', zIndex: 10}}/>\r\n            <p>The bear got too close... reloading!</p>\r\n        </div>\r\n     );\r\n  }\r\n\r\n  // Early return if essential user data is missing\r\n   if (!user || !user.company) {\r\n     return (\r\n         <div className=\"locations-page-wrapper error-notice\">\r\n             <p>Error: User or Company data not loaded correctly.</p>\r\n             <button onClick={() => navigate('/')} className=\"locations-button go-home\">Go Home</button>\r\n         </div>\r\n     );\r\n   }\r\n\r\n  // Main component render\r\n  return (\r\n    <div\r\n      className={`locations-page-wrapper ${activeTool ? `tool-active-${activeTool}` : ''}`}\r\n      ref={containerRef}\r\n      onClick={handleBackgroundClick} // Handle clicks on the background to deactivate tools\r\n    >\r\n      {/* --- Camping Elements Container --- */}\r\n      <div className=\"camping-elements-container\">\r\n        {/* Bear Image - Source changes based on state */}\r\n        <img\r\n          src={bear.src}\r\n          alt=\"Bear\"\r\n          className={`bear ${bear.isFading ? 'fading' : ''}`} // Apply fading class if needed\r\n          style={{ width: `${bear.size}px` }} // Dynamic size\r\n        />\r\n\r\n        {/* Tree Container - Only render if not chopped */}\r\n        {!tree.chopped && (\r\n          <div\r\n            className={`tree-container ${activeTool === 'axe' ? 'choppable' : ''} ${tree.isHit ? 'hit' : ''}`} // Classes for interaction feedback\r\n            onClick={handleTreeClick} // Click action handler\r\n          >\r\n            {/* Tree Image - Opacity reflects health */}\r\n            <img src={TREE_SRC} alt=\"Tree\" className=\"tree-image\" style={{ opacity: tree.health > 0 ? 0.4 + (tree.health / TREE_HEALTH) * 0.6 : 0.4 }}/>\r\n            {/* Tree Health Bar - Show if health is below max */}\r\n            {tree.health < TREE_HEALTH && tree.health > 0 && ( // Also hide if health is 0\r\n                <div className=\"tree-health-bar-container\">\r\n                  <div className=\"tree-health-bar-inner\" style={{ width: `${(tree.health / TREE_HEALTH) * 100}%` }}></div>\r\n                </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Wood Pile Image - Show if tree is chopped, hide if lit */}\r\n        {woodPile.exists && !woodPile.isLit && (\r\n          <img\r\n            src={WOOD_PILE_SRC}\r\n            alt=\"Wood Pile\"\r\n            className={`wood-pile ${activeTool === 'flint' ? 'lightable' : ''}`} // Interaction class\r\n            onClick={handleWoodPileClick} // Click action handler\r\n          />\r\n        )}\r\n\r\n        {/* Campfire Image - Show if wood pile is lit */}\r\n        {woodPile.isLit && (\r\n          <img src={CAMPFIRE_SRC} alt=\"Campfire\" className=\"campfire lit\" />\r\n        )}\r\n\r\n        {/* Tools Area */}\r\n        <div className=\"tools-area\">\r\n             {/* Axe Tool */}\r\n             <img src={AXE_SRC} alt=\"Axe\" className={`tool axe ${activeTool === 'axe' ? 'active' : ''}`} onClick={(e) => handleToolClick('axe', e)} />\r\n             {/* Flint Tool */}\r\n             <img src={FLINT_SRC} alt=\"Flint\" className={`tool flint ${activeTool === 'flint' ? 'active' : ''}`} onClick={(e) => handleToolClick('flint', e)} />\r\n         </div>\r\n      </div>\r\n      {/* --- End Camping Elements --- */}\r\n\r\n\r\n      {/* --- UI Overlay --- */}\r\n      <div className=\"locations-ui-overlay\">\r\n         {/* Display Company Status */}\r\n         <p className=\"company-status-indicator\">\r\n            Company Plan: <span className={companyStatus}>{companyStatus.toUpperCase()}</span>\r\n         </p>\r\n         {/* Main Heading */}\r\n         <h3>Select Route from <strong>{airline || 'Selected Airline'}</strong></h3>\r\n         {/* Back Button */}\r\n         <button onClick={handleBack} className=\"locations-button back\">🔙 Change Airline</button>\r\n\r\n         {/* Group for Location and Date Selectors */}\r\n         <div className=\"location-selectors-group\">\r\n             {/* Location Selectors Row */}\r\n             <div className=\"location-selectors\">\r\n                {/* Origin Selector */}\r\n                <div className=\"select-group\">\r\n                  <label htmlFor=\"origin-select\">Origin:</label>\r\n                  <select id=\"origin-select\" value={origin} onChange={(e) => setOrigin(e.target.value)} required>\r\n                    <option value=\"\">-- Select Origin --</option>\r\n                    {originsList.map((loc) => (<option key={`orig-${loc}`} value={loc}>{loc}</option>))}\r\n                  </select>\r\n                </div>\r\n                {/* Destination Selector */}\r\n                <div className=\"select-group\">\r\n                  <label htmlFor=\"dest-select\">Destination:</label>\r\n                  <select id=\"dest-select\" value={destination} onChange={(e) => setDestination(e.target.value)} required>\r\n                    <option value=\"\">-- Select Destination --</option>\r\n                    {destinationsList.map((loc) => (<option key={`dest-${loc}`} value={loc}>{loc}</option>))}\r\n                  </select>\r\n                </div>\r\n             </div>\r\n\r\n             {/* Date Selector Group */}\r\n              <div className=\"select-group date-selector\">\r\n                 <label htmlFor=\"date-select\">Travel Date:</label>\r\n                 <input\r\n                    type=\"date\"\r\n                    id=\"date-select\"\r\n                    value={selectedDate}\r\n                    onChange={handleDateChange}\r\n                    min={minBookingDate} // Set minimum bookable date\r\n                    max={maxBookingDate} // Set maximum bookable date\r\n                    required // HTML5 validation attribute\r\n                 />\r\n                 {/* Show weekend restriction info only for basic users */}\r\n                 {companyStatus === 'basic' && (\r\n                    <small className=\"date-restriction-info\">Weekends unavailable for Basic plan.</small>\r\n                 )}\r\n                 {/* Display validation error message if any */}\r\n                 {dateError && <p className=\"error-message date-error\">{dateError}</p>}\r\n              </div>\r\n             {/* --- End Date Selector --- */}\r\n         </div>\r\n         {/* --- End Group --- */}\r\n\r\n         {/* Proceed Button */}\r\n         <button\r\n            onClick={handleProceed}\r\n            disabled={proceedDisabled} // Disable if origin, dest, or date is missing\r\n            className=\"locations-button proceed\"\r\n         >\r\n           Continue to Seat Selection →\r\n         </button>\r\n         {/* Optional: Show informational message when button is disabled but no error exists */}\r\n         {proceedDisabled && !dateError && <p className=\"info-message\">Please select origin, destination, and date.</p>}\r\n      </div>\r\n      {/* --- End UI Overlay --- */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Locations;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}