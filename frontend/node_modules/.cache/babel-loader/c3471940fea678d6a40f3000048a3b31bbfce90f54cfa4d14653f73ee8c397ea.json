{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\strik\\\\Downloads\\\\cafecoffee\\\\corporate-travel\\\\frontend\\\\src\\\\components\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { Bar, Line, Pie } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend, PointElement, LineElement, ArcElement } from 'chart.js';\n\n// Import the CSS file\nimport './Dashboard.css';\n\n// Register the components ChartJS needs\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend, PointElement, LineElement, ArcElement);\nconst Dashboard = () => {\n  _s();\n  var _location$state;\n  const [analytics, setAnalytics] = useState(null);\n  const [error, setError] = useState('');\n  const location = useLocation();\n  const navigate = useNavigate();\n  const user = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.user;\n  useEffect(() => {\n    setError('');\n    setAnalytics(null);\n    if (user && user.company && user.company.id) {\n      const companyId = user.company.id;\n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n      axios.get(`${apiUrl}/api/booking-analytics?company_id=${companyId}`).then(response => {\n        if (response.data && typeof response.data === 'object') {\n          // Add basic validation if needed (e.g., check for expected arrays)\n          if (!response.data.bookings_per_airline) response.data.bookings_per_airline = [];\n          if (!response.data.bookings_over_time) response.data.bookings_over_time = [];\n          if (!response.data.top_destinations) response.data.top_destinations = [];\n          setAnalytics(response.data);\n        } else {\n          setError(\"No analytics data found or data format is incorrect.\");\n          setAnalytics({\n            // Set empty structure to avoid render errors\n            bookings_per_airline: [],\n            bookings_over_time: [],\n            top_destinations: []\n          });\n        }\n      }).catch(err => {\n        console.error('Error fetching analytics:', err);\n        let errorMessage = \"An unexpected error occurred while fetching analytics.\";\n        if (err.response) {\n          var _err$response$data;\n          errorMessage = `Failed to load analytics: ${((_err$response$data = err.response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.response.statusText || `Status ${err.response.status}`}`;\n        } else if (err.request) {\n          errorMessage = \"Network error: Could not reach analytics server. Please check your connection.\";\n        }\n        setError(errorMessage);\n        setAnalytics({\n          // Set empty structure on error too\n          bookings_per_airline: [],\n          bookings_over_time: [],\n          top_destinations: []\n        });\n      });\n    } else {\n      console.error(\"Dashboard: User or company ID not found in location state.\");\n      setError(\"User data not available. Cannot load dashboard.\");\n      // Optional: Redirect back to login after a delay\n      // setTimeout(() => navigate('/'), 3000);\n    }\n  }, [user, navigate]); // Keep navigate if used in timeout etc.\n\n  // --- Render Logic ---\n\n  // Handle missing user data explicitly (Before loading/error checks for analytics)\n  if (!user || !user.company || !user.company.id) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-message error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error || \"User or Company information is missing. Please log in again.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        className: \"button-primary\" // Use a common button style if you have one\n        ,\n        children: \"Go to Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }, this);\n  }\n\n  // Show loading state (only if analytics is null AND no error)\n  if (analytics === null && !error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-message loading-message\",\n      children: [\"Loading analytics for \", user.company.name, \"...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }, this);\n  }\n\n  // Show error state (if error is set, takes precedence over empty data)\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-message error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Error Loading Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }, this);\n  }\n\n  // At this point, analytics is an object (potentially with empty arrays), and no error string is set.\n  const hasAirlineData = analytics.bookings_per_airline && analytics.bookings_per_airline.length > 0;\n  const hasTimeData = analytics.bookings_over_time && analytics.bookings_over_time.length > 0;\n  const hasDestinationData = analytics.top_destinations && analytics.top_destinations.length > 0;\n\n  // Prepare Chart Data (safe now)\n  const barData = {\n    labels: analytics.bookings_per_airline.map(item => item.airline),\n    datasets: [{\n      label: 'Total Bookings',\n      data: analytics.bookings_per_airline.map(item => item.total),\n      backgroundColor: 'rgba(54, 162, 235, 0.7)',\n      // Blue\n      borderColor: 'rgba(54, 162, 235, 1)',\n      borderWidth: 1,\n      borderRadius: 4 // Slightly rounded bars\n    }]\n  };\n  const lineData = {\n    labels: analytics.bookings_over_time.map(item => item.date),\n    // Assuming date is formatted nicely\n    datasets: [{\n      label: 'Daily Bookings (Last 30 Days)',\n      data: analytics.bookings_over_time.map(item => item.total),\n      fill: true,\n      // Fill area under line\n      backgroundColor: 'rgba(75, 192, 192, 0.2)',\n      // Teal fill\n      borderColor: 'rgba(75, 192, 192, 1)',\n      // Teal line\n      tension: 0.3,\n      // Smoother curve\n      pointBackgroundColor: 'rgba(75, 192, 192, 1)',\n      pointBorderColor: '#fff',\n      pointHoverRadius: 7,\n      pointHoverBackgroundColor: 'rgba(75, 192, 192, 1)'\n    }]\n  };\n  const pieData = {\n    labels: analytics.top_destinations.map(item => item.destination),\n    datasets: [{\n      label: 'Top Destinations',\n      data: analytics.top_destinations.map(item => item.total),\n      backgroundColor: ['rgba(255, 99, 132, 0.7)',\n      // Red\n      'rgba(255, 159, 64, 0.7)',\n      // Orange\n      'rgba(255, 205, 86, 0.7)',\n      // Yellow\n      'rgba(75, 192, 192, 0.7)',\n      // Teal\n      'rgba(153, 102, 255, 0.7)',\n      // Purple\n      'rgba(201, 203, 207, 0.7)' // Grey\n      ],\n      borderColor: [\n      // White borders for separation\n      '#FFFFFF', '#FFFFFF', '#FFFFFF', '#FFFFFF', '#FFFFFF', '#FFFFFF'],\n      borderWidth: 2,\n      hoverOffset: 8 // Slightly enlarges slice on hover\n    }]\n  };\n\n  // Base Chart options\n  const baseChartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    // Important for fitting charts in fixed height containers\n    plugins: {\n      legend: {\n        position: 'bottom',\n        // Position legend at the bottom\n        labels: {\n          padding: 20,\n          // Add padding to legend items\n          boxWidth: 12,\n          font: {\n            size: 13\n          }\n        }\n      },\n      title: {\n        display: false // We use the card title\n      },\n      tooltip: {\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\n        titleFont: {\n          size: 14\n        },\n        bodyFont: {\n          size: 12\n        },\n        padding: 10,\n        cornerRadius: 4,\n        displayColors: true // Show color boxes in tooltip\n      }\n    },\n    scales: {\n      // Add basic scale styling\n      x: {\n        grid: {\n          display: false // Hide vertical grid lines\n        },\n        ticks: {\n          font: {\n            size: 11\n          }\n        }\n      },\n      y: {\n        grid: {\n          color: 'rgba(200, 200, 200, 0.3)' // Lighter horizontal grid lines\n        },\n        ticks: {\n          font: {\n            size: 11\n          }\n        },\n        beginAtZero: true // Ensure Y axis starts at 0\n      }\n    }\n  };\n\n  // Specific options for Pie chart (e.g., legend position)\n  const pieOptions = {\n    ...baseChartOptions,\n    plugins: {\n      ...baseChartOptions.plugins,\n      // Inherit base plugins config\n      legend: {\n        // Override legend position for Pie\n        position: 'right',\n        labels: {\n          ...baseChartOptions.plugins.legend.labels,\n          // Inherit label styles\n          boxWidth: 15 // Slightly larger box for pie legend\n        }\n      }\n    },\n    scales: {} // Pie chart doesn't use scales\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"dashboard-header\",\n      children: [\"Booking Analytics: \", user.company.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"card-title\",\n          children: \"Bookings per Airline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-container\",\n          children: hasAirlineData ? /*#__PURE__*/_jsxDEV(Bar, {\n            options: baseChartOptions,\n            data: barData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-data-message\",\n            children: \"No booking data found for airlines.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"card-title\",\n          children: \"Bookings Over Time (Last 30 Days)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-container\",\n          children: hasTimeData ? /*#__PURE__*/_jsxDEV(Line, {\n            options: baseChartOptions,\n            data: lineData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-data-message\",\n            children: \"No recent booking data found.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-card full-width-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"card-title\",\n          children: \"Top 5 Destinations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-container pie-chart-container\",\n          children: [\" \", hasDestinationData ?\n          /*#__PURE__*/\n          // The Pie component itself will center if maintainAspectRatio is false\n          _jsxDEV(Pie, {\n            options: pieOptions,\n            data: pieData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-data-message\",\n            children: \"No destination data found.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"wrrN0kcx1EKSnRagDe0ZzOdBAZY=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","axios","Bar","Line","Pie","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","PointElement","LineElement","ArcElement","jsxDEV","_jsxDEV","register","Dashboard","_s","_location$state","analytics","setAnalytics","error","setError","location","navigate","user","state","company","id","companyId","apiUrl","process","env","REACT_APP_API_URL","get","then","response","data","bookings_per_airline","bookings_over_time","top_destinations","catch","err","console","errorMessage","_err$response$data","message","statusText","status","request","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","name","hasAirlineData","length","hasTimeData","hasDestinationData","barData","labels","map","item","airline","datasets","label","total","backgroundColor","borderColor","borderWidth","borderRadius","lineData","date","fill","tension","pointBackgroundColor","pointBorderColor","pointHoverRadius","pointHoverBackgroundColor","pieData","destination","hoverOffset","baseChartOptions","responsive","maintainAspectRatio","plugins","legend","position","padding","boxWidth","font","size","title","display","tooltip","titleFont","bodyFont","cornerRadius","displayColors","scales","x","grid","ticks","y","color","beginAtZero","pieOptions","options","_c","$RefreshReg$"],"sources":["C:/Users/strik/Downloads/cafecoffee/corporate-travel/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Bar, Line, Pie } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  PointElement,\r\n  LineElement,\r\n  ArcElement,\r\n} from 'chart.js';\r\n\r\n// Import the CSS file\r\nimport './Dashboard.css';\r\n\r\n// Register the components ChartJS needs\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  PointElement,\r\n  LineElement,\r\n  ArcElement\r\n);\r\n\r\nconst Dashboard = () => {\r\n  const [analytics, setAnalytics] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const user = location.state?.user;\r\n\r\n  useEffect(() => {\r\n    setError('');\r\n    setAnalytics(null);\r\n\r\n    if (user && user.company && user.company.id) {\r\n      const companyId = user.company.id;\r\n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\n      axios.get(`${apiUrl}/api/booking-analytics?company_id=${companyId}`)\r\n        .then(response => {\r\n          if (response.data && typeof response.data === 'object') {\r\n             // Add basic validation if needed (e.g., check for expected arrays)\r\n             if (!response.data.bookings_per_airline) response.data.bookings_per_airline = [];\r\n             if (!response.data.bookings_over_time) response.data.bookings_over_time = [];\r\n             if (!response.data.top_destinations) response.data.top_destinations = [];\r\n             setAnalytics(response.data);\r\n          } else {\r\n              setError(\"No analytics data found or data format is incorrect.\");\r\n              setAnalytics({ // Set empty structure to avoid render errors\r\n                  bookings_per_airline: [],\r\n                  bookings_over_time: [],\r\n                  top_destinations: []\r\n              });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error('Error fetching analytics:', err);\r\n          let errorMessage = \"An unexpected error occurred while fetching analytics.\";\r\n          if (err.response) {\r\n             errorMessage = `Failed to load analytics: ${err.response.data?.message || err.response.statusText || `Status ${err.response.status}`}`;\r\n          } else if (err.request) {\r\n             errorMessage = \"Network error: Could not reach analytics server. Please check your connection.\";\r\n          }\r\n          setError(errorMessage);\r\n           setAnalytics({ // Set empty structure on error too\r\n               bookings_per_airline: [],\r\n               bookings_over_time: [],\r\n               top_destinations: []\r\n           });\r\n        });\r\n    } else {\r\n       console.error(\"Dashboard: User or company ID not found in location state.\");\r\n       setError(\"User data not available. Cannot load dashboard.\");\r\n       // Optional: Redirect back to login after a delay\r\n       // setTimeout(() => navigate('/'), 3000);\r\n    }\r\n  }, [user, navigate]); // Keep navigate if used in timeout etc.\r\n\r\n  // --- Render Logic ---\r\n\r\n  // Handle missing user data explicitly (Before loading/error checks for analytics)\r\n  if (!user || !user.company || !user.company.id) {\r\n      return (\r\n          <div className=\"dashboard-message error-message\">\r\n              <h2>Error</h2>\r\n              <p>{error || \"User or Company information is missing. Please log in again.\"}</p>\r\n               <button\r\n                   onClick={() => navigate('/')}\r\n                   className=\"button-primary\" // Use a common button style if you have one\r\n                >\r\n                   Go to Login\r\n               </button>\r\n          </div>\r\n      );\r\n  }\r\n\r\n  // Show loading state (only if analytics is null AND no error)\r\n  if (analytics === null && !error) {\r\n      return (\r\n          <div className=\"dashboard-message loading-message\">\r\n              Loading analytics for {user.company.name}...\r\n          </div>\r\n      );\r\n  }\r\n\r\n  // Show error state (if error is set, takes precedence over empty data)\r\n  if (error) {\r\n       return (\r\n          <div className=\"dashboard-message error-message\">\r\n              <h2>Error Loading Dashboard</h2>\r\n              <p>{error}</p>\r\n              {/* Optionally add a retry button or more specific guidance */}\r\n          </div>\r\n       );\r\n  }\r\n\r\n  // At this point, analytics is an object (potentially with empty arrays), and no error string is set.\r\n  const hasAirlineData = analytics.bookings_per_airline && analytics.bookings_per_airline.length > 0;\r\n  const hasTimeData = analytics.bookings_over_time && analytics.bookings_over_time.length > 0;\r\n  const hasDestinationData = analytics.top_destinations && analytics.top_destinations.length > 0;\r\n\r\n  // Prepare Chart Data (safe now)\r\n  const barData = {\r\n    labels: analytics.bookings_per_airline.map(item => item.airline),\r\n    datasets: [{\r\n      label: 'Total Bookings',\r\n      data: analytics.bookings_per_airline.map(item => item.total),\r\n      backgroundColor: 'rgba(54, 162, 235, 0.7)', // Blue\r\n      borderColor: 'rgba(54, 162, 235, 1)',\r\n      borderWidth: 1,\r\n      borderRadius: 4, // Slightly rounded bars\r\n    }]\r\n  };\r\n\r\n  const lineData = {\r\n    labels: analytics.bookings_over_time.map(item => item.date), // Assuming date is formatted nicely\r\n    datasets: [{\r\n      label: 'Daily Bookings (Last 30 Days)',\r\n      data: analytics.bookings_over_time.map(item => item.total),\r\n      fill: true, // Fill area under line\r\n      backgroundColor: 'rgba(75, 192, 192, 0.2)', // Teal fill\r\n      borderColor: 'rgba(75, 192, 192, 1)', // Teal line\r\n      tension: 0.3, // Smoother curve\r\n      pointBackgroundColor: 'rgba(75, 192, 192, 1)',\r\n      pointBorderColor: '#fff',\r\n      pointHoverRadius: 7,\r\n      pointHoverBackgroundColor: 'rgba(75, 192, 192, 1)',\r\n    }]\r\n  };\r\n\r\n  const pieData = {\r\n    labels: analytics.top_destinations.map(item => item.destination),\r\n    datasets: [{\r\n      label: 'Top Destinations',\r\n      data: analytics.top_destinations.map(item => item.total),\r\n      backgroundColor: [\r\n        'rgba(255, 99, 132, 0.7)', // Red\r\n        'rgba(255, 159, 64, 0.7)', // Orange\r\n        'rgba(255, 205, 86, 0.7)', // Yellow\r\n        'rgba(75, 192, 192, 0.7)', // Teal\r\n        'rgba(153, 102, 255, 0.7)', // Purple\r\n        'rgba(201, 203, 207, 0.7)' // Grey\r\n      ],\r\n      borderColor: [ // White borders for separation\r\n        '#FFFFFF',\r\n        '#FFFFFF',\r\n        '#FFFFFF',\r\n        '#FFFFFF',\r\n        '#FFFFFF',\r\n        '#FFFFFF',\r\n       ],\r\n      borderWidth: 2,\r\n      hoverOffset: 8 // Slightly enlarges slice on hover\r\n    }]\r\n  };\r\n\r\n  // Base Chart options\r\n  const baseChartOptions = {\r\n      responsive: true,\r\n      maintainAspectRatio: false, // Important for fitting charts in fixed height containers\r\n      plugins: {\r\n          legend: {\r\n              position: 'bottom', // Position legend at the bottom\r\n              labels: {\r\n                  padding: 20, // Add padding to legend items\r\n                  boxWidth: 12,\r\n                  font: {\r\n                      size: 13,\r\n                  }\r\n              }\r\n          },\r\n          title: {\r\n              display: false, // We use the card title\r\n          },\r\n          tooltip: {\r\n              backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n              titleFont: { size: 14 },\r\n              bodyFont: { size: 12 },\r\n              padding: 10,\r\n              cornerRadius: 4,\r\n              displayColors: true, // Show color boxes in tooltip\r\n          }\r\n      },\r\n      scales: { // Add basic scale styling\r\n        x: {\r\n            grid: {\r\n                display: false // Hide vertical grid lines\r\n            },\r\n            ticks: {\r\n                font: { size: 11 }\r\n            }\r\n        },\r\n        y: {\r\n            grid: {\r\n                color: 'rgba(200, 200, 200, 0.3)' // Lighter horizontal grid lines\r\n            },\r\n            ticks: {\r\n                font: { size: 11 }\r\n            },\r\n            beginAtZero: true // Ensure Y axis starts at 0\r\n        }\r\n      }\r\n  };\r\n\r\n   // Specific options for Pie chart (e.g., legend position)\r\n   const pieOptions = {\r\n      ...baseChartOptions,\r\n       plugins: {\r\n            ...baseChartOptions.plugins, // Inherit base plugins config\r\n            legend: { // Override legend position for Pie\r\n              position: 'right',\r\n              labels: {\r\n                    ...baseChartOptions.plugins.legend.labels, // Inherit label styles\r\n                    boxWidth: 15, // Slightly larger box for pie legend\r\n              }\r\n            },\r\n       },\r\n       scales: {} // Pie chart doesn't use scales\r\n   };\r\n\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <h1 className=\"dashboard-header\">\r\n          Booking Analytics: {user.company.name}\r\n      </h1>\r\n\r\n      <div className=\"dashboard-grid\">\r\n\r\n        {/* Card 1: Bookings per Airline */}\r\n        <div className=\"dashboard-card\">\r\n          <h3 className=\"card-title\">Bookings per Airline</h3>\r\n          <div className=\"chart-container\">\r\n            {hasAirlineData ? (\r\n                <Bar options={baseChartOptions} data={barData} />\r\n            ) : (\r\n              <p className=\"no-data-message\">No booking data found for airlines.</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Card 2: Bookings Over Time */}\r\n        <div className=\"dashboard-card\">\r\n          <h3 className=\"card-title\">Bookings Over Time (Last 30 Days)</h3>\r\n           <div className=\"chart-container\">\r\n            {hasTimeData ? (\r\n                <Line options={baseChartOptions} data={lineData} />\r\n             ) : (\r\n               <p className=\"no-data-message\">No recent booking data found.</p>\r\n             )}\r\n           </div>\r\n        </div>\r\n\r\n        {/* Card 3: Top Destinations (Spans full width on larger screens via grid CSS) */}\r\n        <div className=\"dashboard-card full-width-card\">\r\n          <h3 className=\"card-title\">Top 5 Destinations</h3>\r\n           <div className=\"chart-container pie-chart-container\"> {/* Special class for Pie */}\r\n            {hasDestinationData ? (\r\n                // The Pie component itself will center if maintainAspectRatio is false\r\n                <Pie options={pieOptions} data={pieData} />\r\n             ) : (\r\n               <p className=\"no-data-message\">No destination data found.</p>\r\n             )}\r\n           </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}